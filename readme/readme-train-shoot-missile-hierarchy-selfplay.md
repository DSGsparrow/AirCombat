# 训练 Hierarchical SingleCombat ShootTask
奖励：
- PostureReward 视线角越小，奖励越大，敌方视线角小于pi/2，给负奖励，距离超过7000就急剧下降
- 甚至用了势能（potential）函数：尽可能接近视线角对准等这样的目标，避免奖励累积
- ![距离奖励图](../ppt/Posture%20reward.png)
- AltitudeReward 低于安全高度给负奖励，还向下飞就给速度的负奖励
- EventDrivenReward 终端奖励：被击中或坠毁给-200，导弹获胜（击中）给200
- ShootPenaltyReward 发射一颗导弹就给-10

终止条件：
* LowAltitude 高度低于2500，坠毁
* ExtremeState 异常状态速度异常（极端高速） 旋转异常（极端角速度）
* 高度异常（极端高空） 加速度异常（超过 10G）
* Overload 过载超过10个G
* SafeReturn 正常结束：自己被击中，自己坠毁，所以敌机被击毁或者所以导弹失效
* Timeout 超时：1000个仿真步，200秒

训练成果：03-04 11：00  
蓝色是敌方，红色是我方   
好像也有一定的效果：
+ 出现了盘旋、摇摆S的飞行路径来躲弹
+ 但攻击打弹的效果一般，前期训练的智能体经常不打弹
+ 看来要修改一下打弹惩罚
+ 然后是两机距离很近时无法转进攻？
+ 出现了！转进攻出现了，400
+ 但打弹重合:要不把那个打弹的惩罚改成间隔的倒数之类的
+ 425：出现了打弹、侧向拉开躲弹、在进入对准、打弹

latest 打：
- latest 打 latest 还是会出现一直盘旋找角度不打弹
- latest 打 800 发弹，但弹重合 不过的确一直压制，800无法打弹
- latest 打 900 900打弹，自己陷入劣势，而且无法摆脱，采用回头S躲弹
- 700 怎么还打不过了 敌方发弹后躲不掉了

说明：
+ 打弹不行：
  + 远距离不打，无法形成优势
  + 进入拉扯后不继续打弹造成伤害